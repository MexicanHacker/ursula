#!/bin/sh

awk '/^\// {print $1 "\t" $4}' /proc/swaps | \
while read SWAPDEV SWAPUSED; do 
  if [ ${SWAPUSED} -eq 0 ]; then
    swapoff ${SWAPDEV}
  fi
done